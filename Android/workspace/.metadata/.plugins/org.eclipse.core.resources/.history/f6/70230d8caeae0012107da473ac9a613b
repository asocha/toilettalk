package com.pottymouth.toilettalk;

import java.io.IOException;
import java.util.List;
import java.util.Locale;

import android.app.Activity;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ToggleButton;

public class ComposeReviewActivity extends Activity implements View.OnClickListener {
	
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.compose_review_activity);
        
        updateLocation();
        

    }

	private void updateLocation() {
		MainActivity.updateLocation(ComposeReviewActivity.this);
	}

	@Override
	public void onClick(View v) {
		Log.d("Compose", ""+((ToggleButton) v).isChecked());
	}
	
	@Override
	public void finish() {
		super.finish();
		
		Log.d("Compose", "Unisex: "+((ToggleButton)findViewById(R.id.button_unisex)).isChecked());
	}

	public void startForm() {
		Geocoder geocoder = new Geocoder(this, Locale.ENGLISH);
		
		try {
			  List<Address> addresses = geocoder.getFromLocation(MainActivity.currentLocation.getLatitude(), MainActivity.currentLocation.getLongitude(), 1);
			 
			  if(addresses != null) {
			   Address returnedAddress = addresses.get(0);
			   StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
			   for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
			    strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
			   }
			   myAddress.setText(strReturnedAddress.toString());
			  }
			  else{
			   myAddress.setText("No Address returned!");
			  }
			 } catch (IOException e) {
			  // TODO Auto-generated catch block
			  e.printStackTrace();
			  myAddress.setText("Canont get Address!");
			 }
	}

}
